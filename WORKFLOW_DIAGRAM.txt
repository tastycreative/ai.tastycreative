```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    INSTAGRAM STAGING TOOL - ROLE SYSTEM                      │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│    ADMIN     │  │   MANAGER    │  │   CONTENT    │  │     USER     │
│   (Red 🔴)   │  │  (Blue 🔵)   │  │   CREATOR    │  │  (Gray ⚪)   │
│              │  │              │  │  (Green 🟢)  │  │              │
└──────┬───────┘  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘
       │                 │                 │                 │
       ├─ Create Posts   ├─ Create Posts   ├─ Create Posts   │
       ├─ Submit         ├─ Submit         ├─ Submit         ├─ NO ACCESS
       ├─ Approve ✓      ├─ Approve ✓      │                 │
       ├─ Reject ✗       ├─ Reject ✗       │                 │
       ├─ Schedule       ├─ Schedule       │                 │
       ├─ Publish        ├─ Publish        │                 │
       └─ Delete Any     └─ Delete Any     └─ Delete Drafts  └─ Blocked


════════════════════════════════════════════════════════════════════════════

                           CONTENT WORKFLOW

Creator                     Manager/Admin
   │                             │
   ▼                             │
┌──────────┐                     │
│  DRAFT   │ (Gray)              │
│  Create  │                     │
└────┬─────┘                     │
     │ Submit for Review         │
     ▼                           │
┌──────────┐                     │
│  REVIEW  │ (Yellow)            │
│ Waiting  │ ◄───────────────────┘
└────┬─────┘         │
     │              │ Approve/Reject
     │              ▼
     │         ┌──────────┐
     │         │ APPROVED │ (Green)
     │         │  Ready   │
     │         └────┬─────┘
     │              │ Set Schedule
     │              ▼
     │         ┌──────────┐
     │         │SCHEDULED │ (Purple)
     │         │   Date   │
     │         └────┬─────┘
     │              │ Post to Instagram
     │              ▼
     │         ┌──────────┐
     │         │PUBLISHED │ (Pink)
     │         │   Done   │
     │         └──────────┘
     │
     └─ Can only edit/delete in DRAFT


════════════════════════════════════════════════════════════════════════════

                           UI COMPONENTS

┌─────────────────────────────────────────────────────────────────────────┐
│  Instagram Content Staging                    [MANAGER 🔵]              │
├─────────────────────────────────────────────────────────────────────────┤
│  [Feed Preview 📱] [Queue Timeline 📅]                                  │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │ Your Role: Manager                                         [▼]   │  │
│  │ • Create and edit all posts                                      │  │
│  │ • Approve or reject posts                                        │  │
│  │ Workflow: DRAFT → REVIEW → APPROVED → SCHEDULED → PUBLISHED     │  │
│  └──────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘


POST EDITOR VIEW:
┌─────────────────────────────────────────────┐
│  Edit Post                               [×] │
├─────────────────────────────────────────────┤
│  [Image Preview]                            │
│                                             │
│  Caption: ________________________          │
│           ________________________          │
│                                             │
│  Scheduled Date: [2025-10-15]              │
│                                             │
│  Status: [REVIEW 🟡] (MANAGER)             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━            │
│  ████░░░░░░░░░░░ (Progress)                │
│                                             │
│  [✓ Approve]  [✗ Reject]                   │
│                                             │
│  [Close]                            [🗑️]    │
└─────────────────────────────────────────────┘


QUEUE TIMELINE VIEW:
┌─────────────────────────────────────────────────────────────┐
│  📅 Today                                       (3 posts)    │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────┬──────────────────────────────────────────────┐ │
│  │ [Image] │ 9:00 AM              [SCHEDULED 🟣]          │ │
│  │  Video  │ Caption preview text here...                 │ │
│  │  POST   │ filename.mp4        [Edit] [📢 Publish]     │ │
│  └─────────┴──────────────────────────────────────────────┘ │
│                                                             │
│  📅 Tomorrow                                    (2 posts)   │
├─────────────────────────────────────────────────────────────┤
│  [More posts...]                                            │
│                                                             │
│  📅 Unscheduled                                 (5 posts)   │
│  [Draft posts without dates...]                            │
└─────────────────────────────────────────────────────────────┘


════════════════════════════════════════════════════════════════════════════

                        PERMISSION CHECKS

Function: canApprove()
├─ ADMIN → ✅ YES
├─ MANAGER → ✅ YES
├─ CONTENT_CREATOR → ❌ NO
└─ USER → ❌ NO

Function: canSchedule()
├─ ADMIN → ✅ YES
├─ MANAGER → ✅ YES
├─ CONTENT_CREATOR → ❌ NO
└─ USER → ❌ NO

Function: canSubmitForReview()
├─ ADMIN → ✅ YES
├─ MANAGER → ✅ YES
├─ CONTENT_CREATOR → ✅ YES
└─ USER → ❌ NO

Function: canAccessTool()
├─ ADMIN → ✅ YES
├─ MANAGER → ✅ YES
├─ CONTENT_CREATOR → ✅ YES
└─ USER → ❌ NO (Shows access denied page)


════════════════════════════════════════════════════════════════════════════

                        DATA FLOW

1. User logs in → Clerk provides user object
2. getUserRole() reads publicMetadata.role
3. canAccessTool() checks if role has access
4. If USER role → Show access denied page
5. If authorized → Load posts from database
6. UI shows only allowed actions per role
7. User clicks action button → Permission check
8. If allowed → updatePost() → Database
9. Status changes → UI updates

Clerk (Auth) → Role Check → Permission Gates → UI → Actions → Database


════════════════════════════════════════════════════════════════════════════

                         SETUP CHECKLIST

□ Set role in Clerk Dashboard:
  Users → Select User → Public Metadata → Add: {"role": "MANAGER"}

□ Test each role:
  - CONTENT_CREATOR: Can submit, cannot approve
  - MANAGER: Can approve and schedule
  - ADMIN: Full access
  - USER: Access denied

□ Set default role for new users:
  Configure signup to set role: "USER"

□ Verify workflow:
  DRAFT → Submit → REVIEW → Approve → APPROVED → Schedule → PUBLISHED

□ Test permissions:
  - Only managers can approve
  - Only admins/managers can schedule
  - Content creators blocked from advanced actions

□ Check UI:
  - Role badge shows in header
  - Workflow guide expands/collapses
  - Progress bar updates
  - Action buttons show/hide based on role


════════════════════════════════════════════════════════════════════════════

                      🎉 IMPLEMENTATION COMPLETE! 🎉

✅ Role-based access control
✅ Complete approval workflow
✅ Visual status indicators
✅ Permission enforcement
✅ User-friendly UI
✅ Production ready!

════════════════════════════════════════════════════════════════════════════
```
